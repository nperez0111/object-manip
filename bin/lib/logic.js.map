{"version":3,"sources":["../../src/lib/logic.js"],"names":[],"mappings":";;;;;QAiBgB,U,GAAA,U;QA0BA,c,GAAA,c;;AA3ChB;;AAOA,IAAM,WAAW,QAAS,oBAAT,CAAjB;AAAA,IACI,QAAQ,QAAS,OAAT,CADZ;AAAA,IAEI,SAAS,QAAS,YAAT,CAFb;AAAA,IAGI,QAAQ,QAAS,UAAT,CAHZ;AAAA,IAII,UAAU,QAAS,SAAT,CAJd;AAAA,IAKI,aAAa,QAAS,cAAT,CALjB;AAAA,IAMI,gBAAgB,SAAhB,aAAgB,CAAW,CAAX,EAAe;AAC3B,WAAO,SAAU,CAAV,KAAiB,QAAS,CAAT,CAAxB;AACH,CARL;;AAUO,SAAS,UAAT,CAAqB,SAArB,EAAgC,QAAhC,EAA2C;AAC9C,QAAI,MAAM,SAAN,GAAM,CAAE,GAAF,EAAO,GAAP,EAAgB;;AAEtB,YAAI,MAAM,IAAI,KAAJ,CAAW,GAAX,EAAiB,GAAjB,CAAsB;AAAA,mBAAO,IAAI,KAAJ,CAAW,GAAX,CAAP;AAAA,SAAtB,EAAgD,MAAhD,CAAwD,UAAE,CAAF,EAAK,CAAL;AAAA,mBAAY,EAAE,MAAF,CAAU,CAAV,CAAZ;AAAA,SAAxD,EAAmF,EAAnF,CAAV;AAAA,YACI,MAAM,GADV;;AAGA,YAAK,CAAC,MAAO,GAAP,CAAN,EAAqB;AACjB;AACA,mBAAO,GAAP;AAEH;;AAED,YAAI,OAAJ,CAAa,eAAO;AAChB,kBAAM,IAAK,GAAL,CAAN;AACH,SAFD;;AAIA,eAAO,GAAP;AAEH,KAjBD;AAkBA,WAAO,oBAAS,UAAU,GAAV,CAAe,UAAW,GAAX,EAAiB;AAC5C,YAAI,MAAM,IAAK,IAAK,CAAL,CAAL,CAAV;AACA;AACA,eAAO,oBAAS,IAAK,IAAK,CAAL,CAAL,EAAe,QAAf,CAAT,EAAoC,IAAI,KAAJ,CAAW,IAAI,MAAJ,GAAa,CAAb,GAAiB,IAAK,CAAL,CAAjB,GAA4B,CAA5B,GAAgC,IAAK,CAAL,CAA3C,CAApC,CAAP;AACH,KAJe,CAAT,CAAP;AAKH;;AAEM,SAAS,cAAT,CAAyB,GAAzB,EAA8B,GAA9B,EAAmC,IAAnC,EAAyC,MAAzC,EAAiD,IAAjD,EAAuD,OAAvD,EAAiE;AACpE,QAAI,OAAO,KAAX;AACA,QAAK,IAAI,MAAJ,CAAY,CAAZ,KAAmB,GAAnB,IAA0B,IAAI,MAAJ,CAAY,CAAZ,KAAmB,GAAlD,EAAwD;AACpD,cAAM,IAAI,KAAJ,CAAW,CAAX,CAAN;AACA,eAAO,IAAP;AACH;;AAED,QAAI,QAAQ,IAAI,KAAJ,CAAW,GAAX,CAAZ;AAAA,QACI,QAAQ,OAAO,oBAAS,OAAQ,GAAR,CAAT,EAAwB,IAAxB,EAA8B,OAA9B,CAAP,GAAiD,OAAQ,GAAR,CAD7D;;AAGA,QAAK,QAAQ,KAAb,EAAqB;;AAEjB,aAAM,GAAN,IAAc,MAAM,KAAN,EAAd;AACA,eAAQ,GAAR,IAAgB,MAAM,MAAN,IAAgB,CAAhB,GAAoB,KAApB,GAA4B,oBAAS,KAAT,EAAgB,KAAhB,CAA5C;AACA,eAAO,CAAE,IAAF,EAAQ,MAAR,CAAP;AAEH;;AAED,SAAK,MAAL,CAAa,GAAb,EAAkB,CAAlB;AACA,WAAO,MAAP,CAAe,GAAf,EAAoB,CAApB;AACA,QAAI,MAAM,MAAM,MAAN,IAAgB,CAAhB,GAAoB,sBAAW,GAAX,EAAgB,KAAhB,CAApB,GAA8C,oBAAS,KAAT,EAAgB,KAAhB,CAAxD;AACA,WAAO,CAAE,IAAF,EAAQ,MAAR,EAAgB,CAAE,GAAF,EAAO,MAAO,CAAP,CAAP,CAAhB,CAAP;;AAEA;AAEH","file":"logic.js","sourcesContent":["import {\n    reducer,\n    makeObj,\n    valueOf,\n    createObj\n} from './utils';\n\nconst isString = require( 'validate.io-string' ),\n    curry = require( 'curry' ),\n    isFunc = require( 'isfunction' ),\n    isObj = require( 'isobject' ),\n    isArray = require( 'isarray' ),\n    hasOwnProp = require( 'has-own-prop' ),\n    isStringOrArr = function ( a ) {\n        return isString( a ) || isArray( a );\n    };\n\nexport function actualCopy( placement, valueObj ) {\n    let get = ( str, obj ) => {\n\n        let arr = str.split( ',' ).map( cur => cur.split( '.' ) ).reduce( ( a, b ) => a.concat( b ), [] ),\n            ret = obj;\n\n        if ( !isObj( obj ) ) {\n            //if something passed in the second arg return the array they want.\n            return arr;\n\n        }\n\n        arr.forEach( cur => {\n            ret = ret[ cur ];\n        } );\n\n        return ret;\n\n    };\n    return reducer( placement.map( function ( cur ) {\n        let cal = get( cur[ 0 ] );\n        //fix bug where splitting via , shoul be handled seperate from .\n        return makeObj( get( cur[ 0 ], valueObj ), cal.slice( cal.length - 1 < cur[ 1 ] ? 0 : cur[ 1 ] ) );\n    } ) );\n}\n\nexport function parseRelocator( str, cur, keys, values, func, thisArg ) {\n    let back = false;\n    if ( str.charAt( 0 ) == '.' && str.charAt( 1 ) == '/' ) {\n        str = str.slice( 2 );\n        back = true;\n    }\n\n    let props = str.split( '.' ),\n        value = func ? valueOf( values[ cur ], func, thisArg ) : values[ cur ];\n\n    if ( back == false ) {\n\n        keys[ cur ] = props.shift();\n        values[ cur ] = props.length == 0 ? value : makeObj( value, props );\n        return [ keys, values ];\n\n    }\n\n    keys.splice( cur, 1 );\n    values.splice( cur, 1 );\n    let obj = props.length == 1 ? createObj( str, value ) : makeObj( value, props );\n    return [ keys, values, [ obj, props[ 0 ] ] ];\n\n    /*returns in format [keys,values,[optional val to set]]*/\n\n}\n"]}